# Домашнее задание №1: Игра "Жизнь"

1. [Описание игры](https://github.com/svdcvt/math_python_hse/blob/master/fall-2021/homeworks/homework-1.md#правила-игры)
2. [Модуль Pygame](https://github.com/svdcvt/math_python_hse/blob/master/fall-2021/homeworks/homework-1.md#pygame)
3. [Домашнее задание](https://github.com/svdcvt/math_python_hse/blob/master/fall-2021/homeworks/homework-1.md#как-сдавать-домашнее-задание)

> Игра «Жизнь» (англ. Conway's Game of Life) — клеточный автомат, придуманный английским математиком Джоном Конвеем в 1970 году.

# Правила игры

- Место действия этой игры - «вселенная», которая в нашем случае представляется клеточным полем размера $n \times m$. То есть, в Питоне такое поле можно представить в виде списка списков.
- Каждая клетка находится в одном из двух состояний - "мертвом" или "живом".
- Поколение - некая заданная конфигурация поля.
- Потомков (или последующее поколение) можно рассчитать следующим образом:
    - если у мёртвой клетки рядом ровно три живые клетки, то она становится живой;
    - если у живой клетки рядом есть две или три живые соседки, то эта клетка продолжает жить;
    - в противном случае, если соседей меньше двух или больше трёх, клетка умирает («от одиночества» или «от перенаселённости»).
- Эти простые правила приводят к огромному разнообразию форм, которые могут возникнуть в игре. Изучите все [известные формы.](https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life#Examples_of_patterns)

# Pygame

Pygame - python модуль предназначенный для создания игр.

## Установка

- Если вы устанавливали Python через терминал и пользуетесь Pycharm, то установить можно с помощью команды `pip install pygame`.
- Если вы работаете в Replit, то ничего устанавливать не надо, создайте Replit выбрав язык "Pygame".

## Минимальная "игра"

- Импортируем pygame
    - `import pygame`
- Pygame состоит из множества подмодулей, поэтому, при работе с pygame необходимо выполнить `pygame.init`
- Создадим дисплей (окно игры):
    - `gameDisplay = pygame.display.set_mode((DISPLAY_WIDTH, DISPLAY_HEIGHT))`
    - Залить окно определенным цветом `gameDisplay.fill((0, 0, 0))`
    **(0, 0, 0)** - белый в RGB
- Для того, чтобы можно было получать события, которые произошли во время игры (например, игрок нажал кнопку), а также делать свои обновления, необходимо завести цикл:

    ```python
    finished = False
    while not finished:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                finished = True
            print(event)

        pygame.display.update()

    pygame.quit()
    ```

    Внутри цикла мы можем получить события. Например, не вышел ли юзер из игры, если вышел, то нам придет событие `pygame.QUIT`, после которого стоит завершить исполнения программы. После завершения необходимо написать `pygame.quit()`

- Итоговый код

    ```python
    import pygame

    DISPLAY_WIDTH = 800
    DISPLAY_HEIGHT = 600
    WHITE = (255, 255, 255)

    def game_loop():
        pygame.init()
        gameDisplay = pygame.display.set_mode((DISPLAY_WIDTH, DISPLAY_HEIGHT))
        pygame.display.set_caption('Simple pygame program')
        gameDisplay.fill(WHITE)

        finished = False
        while not finished:
            for event in pygame.event.get():
                if event.type == pygame.QUIT:
                    finished = True
                print(event)

            pygame.display.update()

        pygame.quit()

    if __name__ == "__main__":
        game_loop()
    ```

### Нарисуем объекты

- Нарисовать прямоугольник `pygame.draw.rect(display, color, [x, y, w, h])`
    - **display** - созданное раннее окно
    - **x, y** - координаты верхнего левого угла
    - **w, h** - ширина и высота
    - **color** - цвет
- Нарисовать линию соединяющую две точки `pygame.draw.line(display, color, (x0, y0), (x1, x2), thickness)`
    - **(x0, y0), (x1, y1)** - координаты точек, которые необхомо соединить

### Добавим поддержку клавиш

- При нажатии на клавишу происходит событие `pygame.KEYDOWN`, после отжатия клавиши - `pygame.KEYUP`. События хранятся в `event.type`
- Также в каждом событии сохраняется нажатая клавиша `event.key`
    - Пробел - `pygame.K_SPACE`
    - Стрелочка вверх/вниз - `pygame.K_UP, pygame.K_DOWN`
- Нажатие на кнопку мышки - `pygame.MOUSEBUTTONDOWN`
    - Левая кнопка: `event.button == 1`
    - Правая кнопка: `event.button == 3`

### Материалы

- [Туториал по pygame](https://pythonprogramming.net/pygame-python-3-part-1-intro/)

# Как сдавать домашнее задание?

Необходимо реализовать интерактивную визуализацию игры "Жизнь". Задачу можно разделить на две части:

## Движок: релизовать функцию `get_next_generation`

Данная часть является тестируемой и ее необходимо [сдать в контест](https://contest.yandex.ru/contest/20857/standings)

- На вход функция получает поколение в виде бинарной матрицы, где 0 означает мертвую клетку, а 1 - живую.
- Функция должна вернуть следующее поколение. Обратите внимание, что в этой функции не нужно считывать данные и печатать результат.

    **Примеры:**

    ```python
    generation = [
        [0, 1, 0],
        [0, 1, 0],
        [0, 1, 0],
    ]

    next_generation = get_next_generation(generation)
    print(next_generation)
    [[0, 0, 0],
     [1, 1, 1],
     [0, 0, 0],]
    ```

## Визуалка: интерактивная визуализация с помощью PyGame

Данная часть является оцениваемой и ее необходимо сдать в Replit (ссылка появится позже).

- Создайте клеточное поле, размер выберите на свое усмотрение, но не делайте большие поля, 30 на 30 будет достаточно.
- Черные клетки - живые, белые - мертвые.
- Левой кнопкой мышки можно "оживить" клетку, а правой "умертвить".
- Стрелочка вправо - перейти к следующему поколению.
- Пробел - "умертвить" все клетки, то есть, отчистить поле.
- Пример конечного результата: [ТЫК СЮДА](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/3380c9bc-ec4b-4be5-a19c-177018efc0c5/2019-09-29_21-33-13.mp4?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAT73L2G45O3KS52Y5%2F20210829%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20210829T124548Z&X-Amz-Expires=86400&X-Amz-Signature=8a0ea97183a957260c03dbc4453a0da35c4ef05e413f2040cbc3a27b7858d0e8&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D"2019-09-29_21-33-13.mp4)
- Если вам интересно, то вы можете придумать какие-то особенные возможности игры и её визуализации или дополнительные настройки (меню игры, кнопка назад, выбор размера поля, цвет живых клеток, цвета старых/новых живых клеток). Если сердце ассистента будет покорено, то он накинет вам допбалл.
